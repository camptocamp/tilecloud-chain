grids:
    swissgrid_5:
        resolutions: [100, 50, 20, 10, 5]
        bbox: [420000, 30000, 900000, 350000]
        tile_size: 256
        srs: epsg:21781

    swissgrid_01:
        resolutions: [1, 0.2, 0.1]
        resolution_scale: 10
        bbox: [420000, 30000, 900000, 350000]
        tile_size: 256
        srs: epsg:21781

caches:
    local:
        type: filesystem
        http_url: http://taurus/tiles
        folder: /tmp/tiles
    multi_host:
        type: filesystem
        http_url: http://%(host)s/tiles
        folder: /tmp/tiles
        hosts:
        - wmts1
        - wmts2
        - wmts3
    multi_url:
        type: filesystem
        http_urls:
        - http://wmts1/tiles
        - http://wmts2/tiles
        - http://wmts3/tiles
        folder: /tmp/tiles
    mbtiles:
        type: mbtiles
        http_url: http://taurus/tiles
        folder: /tmp/tiles/mbtiles
    s3:
        type: s3
        http_url: https://%(host)s/%(bucket)s/%(folder)s
        host: s3-eu-west-1.amazonaws.com
        bucket: tiles
        folder: tiles

layer_default:
    grid: swissgrid_5
    type: wms
    url: http://localhost/mapserv
    wmts_style: default
    mime_type: image/png
    extension: png
    dimensions:
    -   name: DATE
        default: 2012
        value: 2012
        values: [2005, 2010, 2012]
    meta: on
    meta_size: 8
    meta_buffer: 128
    connection: user=postgres password=postgres dbname=tests host=localhost
    cost:
        # [ms]
        tileonly_generation_time: 60
        # [ms]
        tile_generation_time: 30
        # [ms]
        metatile_generation_time: 30
        # [ko]
        tile_size: 20

layers:
    point:
        layers: point
        sql: ST_Buffer(ST_Union(the_geom), 100, 2) FROM tests.point
    point_hash:
        layers: point
        empty_metatile_detection:
            size: 20743
            hash: 01062bb3b25dcead792d7824f9a7045f0dd92992
        empty_tile_detection:
            size: 334
            hash: dd6cb45962bccb3ad2450ab07011ef88f766eda8
    line:
        layers: line
        sql: ST_Buffer(ST_Union(the_geom), 100, 2) FROM tests.line
    polygon:
        layers: polygon
        sql: ST_Buffer(ST_Union(the_geom), 100, 2) FROM tests.polygon
    polygon2:
        layers: polygon
        grid: swissgrid_01
        sql: ST_Buffer(ST_Union(the_geom), 100, 2) FROM tests.polygon
    all:
        layers: point,line,polygon
        meta: off
        bbox: [550000, 170000, 560000, 180000]
    mapnik:
        type: mapnik
        mapfile: mapfile/test.mapnik
        meta_buffer: 0
        data_buffer: 128
        output_format: png
        sql: ST_Buffer(ST_Union(the_geom), 100, 2) FROM tests.polygon
    mapnik_grid:
        type: mapnik
        mapfile: mapfile/test.mapnik
        meta: off
        meta_buffer: 0
        data_buffer: 128
        output_format: grid
        mime_type: application/utfgrid
        extension: json
        resolution: 16
        sql: ST_Buffer(ST_Union(the_geom), 100, 2) FROM tests.polygon
        layers_fields:
            point:
            - name
            line:
            - name
            polygon:
            - name
generation:
    default_cache: local
    default_layers: [line, polygon]
    maxconsecutive_errors: 2
    geodata_folder: tilecloud_chain
    deploy_config: tests/deploy.cfg
    build_cmds:
    - python bootstrap.py --distribute
    - ./buildout/bin/buildout
    deploy_user: deploy
    ssh_options: -o StrictHostKeyChecking=no
    code_folder: /tmp/tests/test
    apache_config: /tmp/tests/test.conf
    apache_content: test file

openlayers:
    srs: epsg:21781
    center_x: 600000
    center_y: 200000

cost:
    # [nb/month]
    request_per_layers: 10000000
    # GeoData size [Go]
    esb_size: 100

mapcache:
    mapserver_url: http://localhost/mapserv
    mapcache_url: /mapcache
    config_file: mapcache.xml
    resolutions: [100, 50, 20, 10, 5, 2, 1, 0.5]
    layers: [point, line, polygon]

sns:
    topic: sns_topic
